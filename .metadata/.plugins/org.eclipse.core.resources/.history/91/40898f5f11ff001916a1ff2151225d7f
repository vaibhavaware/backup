package com.ivl.movieinfoservice.resources;

import java.util.Arrays;
import java.util.List;

import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import com.ivl.movieinfoservice.models.Movie;

@RestController
@RequestMapping("/movies")
public class MovieResource {

	List<Movie> movies = Arrays.asList(new Movie(1001, "Iron Man",
			"Iron Man is a 2008 American superhero film based on the Marvel Comics character of the same name. Produced by Marvel Studios and distributed by Paramount Pictures"),
			new Movie(1002, "Lucy",
					"Lucy is a 2014 French science fiction action film written and directed by Luc Besson and produced by his wife Virginie Besson-Silla for his company EuropaCorp."),
			new Movie(1003, "pirates of the caribbean",
					"Pirates of the Caribbean is a series of five fantasy swashbuckler films produced by Jerry Bruckheimer and loosely based on Walt Disney's eponymous theme park ride"));

	@RequestMapping("/{movieId}")
	public Movie getMovieInfo(@PathVariable("movieId") Long movieId) {

		return movies.stream().filter(movie -> movie.getMovieId().equals(movieId)).findAny().orElse(null);
	}

	@GetMapping(value = "/{movieName}")
	public Movie getMovieInfo(@PathVariable("movieName") String movieName) {
		return movies.stream().filter(movie -> movie.getMovieName().equalsIgnoreCase(movieName)).findAny().orElse(null);
	}

}
